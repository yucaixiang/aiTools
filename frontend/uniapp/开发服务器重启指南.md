# UniApp H5 开发服务器重启指南

## 方法一：在终端中停止并重启（推荐）

### 1. 停止服务器

在运行 `npm run dev:h5` 的终端窗口中：

**按快捷键停止**：
- **Mac/Linux**: 按 `Ctrl + C`（或 `Cmd + C`）
- **Windows**: 按 `Ctrl + C`

### 2. 重新启动

停止后，再次运行：
```bash
npm run dev:h5
```

---

## 方法二：查找并终止进程后重启

### 1. 查找进程

在新的终端窗口中运行：

```bash
# 查找占用3000端口的进程
lsof -i :3000

# 或者查找node进程
ps aux | grep "uni -p h5" | grep -v grep
```

### 2. 终止进程

找到进程ID（PID）后，终止进程：

```bash
# 方法1：使用kill命令（替换<PID>为实际进程ID）
kill <PID>

# 方法2：直接终止占用3000端口的进程
lsof -ti:3000 | xargs kill -9

# 方法3：使用pkill（Mac/Linux）
pkill -f "uni -p h5"
```

### 3. 重新启动

进入项目目录并启动：
```bash
cd /Users/bjsttlp324/Desktop/tools/frontend/uniapp
npm run dev:h5
```

---

## 方法三：使用脚本一键重启

### 创建重启脚本

创建 `restart.sh` 文件：

```bash
#!/bin/bash
# 停止现有进程
lsof -ti:3000 | xargs kill -9 2>/dev/null
sleep 2
# 重新启动
npm run dev:h5
```

### 使用脚本

```bash
# 添加执行权限
chmod +x restart.sh

# 运行脚本
./restart.sh
```

---

## 方法四：在IDE中重启

### VS Code / Cursor

1. **停止**：在终端面板中点击垃圾桶图标 🗑️ 或按 `Ctrl + C`
2. **重启**：再次运行 `npm run dev:h5`

### WebStorm / IntelliJ IDEA

1. **停止**：点击终端中的停止按钮 ⏹️
2. **重启**：再次运行 `npm run dev:h5`

---

## 常见问题

### Q: 按 Ctrl+C 没有反应？

**A**: 尝试以下方法：
1. 多次按 `Ctrl + C`
2. 使用 `Ctrl + Z` 暂停进程，然后使用 `kill %1` 终止
3. 强制终止：`lsof -ti:3000 | xargs kill -9`

### Q: 端口被占用怎么办？

**A**: 检查并终止占用端口的进程：
```bash
# 查看占用3000端口的进程
lsof -i :3000

# 终止进程
lsof -ti:3000 | xargs kill -9
```

### Q: 修改配置后需要重启吗？

**A**: 
- **修改代码**：通常不需要重启，Vite会自动热更新
- **修改配置文件**（如 `vite.config.ts`、`manifest.json`、`pages.json`）：需要重启
- **修改依赖**（`package.json`）：需要重启并重新安装依赖

### Q: 如何查看服务器是否正在运行？

**A**: 
```bash
# 检查端口
lsof -i :3000

# 检查进程
ps aux | grep "uni -p h5" | grep -v grep

# 访问测试
curl -I http://localhost:3000
```

---

## 快速命令参考

```bash
# 停止服务器（在运行npm run dev:h5的终端中）
Ctrl + C

# 查找并终止进程
lsof -ti:3000 | xargs kill -9

# 重新启动
cd /Users/bjsttlp324/Desktop/tools/frontend/uniapp
npm run dev:h5

# 一键重启（如果创建了脚本）
./restart.sh
```

---

## 最佳实践

1. **开发时**：使用 `Ctrl + C` 停止，然后重新运行 `npm run dev:h5`
2. **调试时**：如果遇到问题，先完全停止进程，等待2-3秒后再重启
3. **修改配置后**：记得重启服务器使配置生效
4. **端口冲突**：如果3000端口被占用，可以在 `vite.config.ts` 中修改端口号

---

**最后更新**: 2025-12-05

