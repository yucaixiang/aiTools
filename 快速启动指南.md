# AI工具推荐系统 - 快速启动指南

## 📋 前置要求

在开始之前，请确保已安装：

- ✅ **Docker Desktop** (macOS/Windows) 或 Docker (Linux)
- ✅ **Java 17+**
- ✅ **Maven 3.8+**
- ✅ **IntelliJ IDEA** (推荐) 或其他Java IDE

## 🚀 一键启动（推荐）

### 方式1：使用启动脚本（最快）

```bash
# 在项目根目录执行
./start-all.sh
```

脚本将自动完成：
1. ✅ 检查Docker环境
2. ✅ 启动基础服务（MySQL、Redis、Elasticsearch等）
3. ✅ 初始化数据库和示例数据
4. ✅ 编译后端项目

### 方式2：手动步骤

#### 步骤1：启动基础服务

```bash
cd deployment
docker-compose up -d
```

等待约30秒，让所有服务启动完成。

#### 步骤2：初始化数据库

```bash
# 初始化数据库表结构
docker exec -i tool-recommend-mysql mysql -uroot -proot123456 < scripts/init-db.sql

# 导入示例数据
docker exec -i tool-recommend-mysql mysql -uroot -proot123456 tool_recommend < scripts/init-sample-data.sql
```

#### 步骤3：启动后端服务

**使用IDEA：**

1. 打开IntelliJ IDEA
2. File → Open → 选择 `backend` 目录
3. 等待Maven导入依赖
4. 运行 `tool-service/src/main/java/com/toolrecommend/tool/ToolServiceApplication.java`
5. 运行 `user-service/src/main/java/com/toolrecommend/user/UserServiceApplication.java`

**使用命令行：**

```bash
# 终端1 - 启动Tool Service
cd backend/tool-service
mvn spring-boot:run

# 终端2 - 启动User Service
cd backend/user-service
mvn spring-boot:run
```

## ✅ 验证服务

### 1. 检查基础服务

```bash
# 查看Docker服务状态
docker-compose ps

# 测试MySQL
docker exec -it tool-recommend-mysql mysql -uroot -proot123456 -e "SELECT COUNT(*) FROM tool_recommend.tool;"

# 测试Redis
docker exec -it tool-recommend-redis redis-cli -a redis123456 PING
```

### 2. 测试后端API

**测试Tool Service：**

```bash
# 查询热门工具
curl http://localhost:8081/api/tools/hot

# 查询所有分类
curl http://localhost:8081/api/categories

# 搜索工具
curl "http://localhost:8081/api/tools/search?keyword=Notion"
```

**测试User Service：**

```bash
# 用户注册
curl -X POST http://localhost:8082/api/users/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "email": "test@example.com",
    "password": "123456",
    "nickname": "测试用户"
  }'

# 用户登录
curl -X POST http://localhost:8082/api/users/login \
  -H "Content-Type: application/json" \
  -d '{
    "account": "testuser",
    "password": "123456"
  }'
```

## 📦 服务地址汇总

### 基础服务

| 服务 | 地址 | 账号/密码 |
|------|------|----------|
| MySQL | localhost:3306 | root / root123456 |
| Redis | localhost:6379 | redis123456 |
| Elasticsearch | http://localhost:9200 | - |
| Kibana | http://localhost:5601 | - |
| Qdrant | http://localhost:6333 | - |
| Ollama | http://localhost:11434 | - |
| Kafka | localhost:9092 | - |
| MinIO | http://localhost:9000 | minioadmin / minioadmin |
| Portainer | https://localhost:9443 | admin / admin123456 |

### 后端服务

| 服务 | 端口 | API文档 |
|------|------|---------|
| Tool Service | 8081 | http://localhost:8081/api/tools |
| User Service | 8082 | http://localhost:8082/api/users |

## 📊 示例数据

系统已预置示例数据：

- ✅ 10个热门工具（Notion、VS Code、Figma、ChatGPT等）
- ✅ 6个主分类（开发工具、设计工具、生产力工具等）
- ✅ 12个子分类
- ✅ 10个常用标签
- ✅ 2个测试用户（testuser、demo）
- ✅ 3条示例评论
- ✅ 2组AI对话记录

**测试账号：**
- 用户名：`testuser` 或 `demo`
- 密码：`password123`（BCrypt加密后存储）

## 🔍 常见问题

### Q1: Docker服务启动失败

**A:** 检查端口占用情况

```bash
# 检查端口占用
lsof -i :3306  # MySQL
lsof -i :6379  # Redis
lsof -i :9200  # Elasticsearch

# 如果有占用，停止相关服务或修改docker-compose.yml端口配置
```

### Q2: 数据库初始化失败

**A:** 检查MySQL是否正常启动

```bash
# 查看MySQL日志
docker logs tool-recommend-mysql

# 手动连接MySQL测试
docker exec -it tool-recommend-mysql mysql -uroot -proot123456
```

### Q3: 后端服务启动报错

**A:** 常见问题：

1. **数据库连接失败** - 确保MySQL服务已启动
2. **Redis连接失败** - 确保Redis服务已启动
3. **端口被占用** - 修改application.yml中的端口
4. **依赖下载失败** - 检查Maven配置，尝试清理缓存：`mvn clean install -U`

### Q4: API请求返回401错误

**A:** JWT Token相关问题：

1. 检查是否已登录并获取Token
2. 确保请求头包含：`Authorization: Bearer {token}`
3. 检查Token是否过期

## 🛑 停止服务

### 停止所有服务

```bash
./stop-all.sh
```

或手动停止：

```bash
# 停止Docker服务
cd deployment
docker-compose down

# 停止后端服务 - 在IDEA中点击停止按钮，或在终端按Ctrl+C
```

### 清理数据（可选）

```bash
# 删除所有Docker卷（会清空数据库数据）
docker-compose down -v

# 重新启动后需要重新初始化数据库
./start-all.sh
```

## 📚 下一步

1. **开发AI Service** - 集成Ollama实现智能对话
2. **开发Gateway Service** - 统一API网关和鉴权
3. **开发前端** - UniApp多端应用
4. **完善功能** - 评论、收藏、搜索优化等

## 📞 获取帮助

- 查看完整文档：`README.md`
- 技术架构文档：`技术架构文档.md`
- API接口文档：`API接口文档.md`
- 数据库设计：`数据库设计文档.md`

---

**祝您开发顺利！🎉**
